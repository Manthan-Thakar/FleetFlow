### FleetFlow Authentication API Tests
### Make sure dev server is running: npm run dev

@baseUrl = http://localhost:3000

###############################################
# 1. Sign Up
###############################################

### Sign Up - Create new user account
POST {{baseUrl}}/api/auth/signup
Content-Type: application/json

{
  "email": "testuser@company.com",
  "password": "SecurePass123",
  "displayName": "Test User",
  "role": "manager",
  "companyId": "company_001",
  "phoneNumber": "+1234567890"
}

###############################################
# 2. Sign In
###############################################

### Sign In - Authenticate user
POST {{baseUrl}}/api/auth/signin
Content-Type: application/json

{
  "email": "testuser@company.com",
  "password": "SecurePass123"
}

### Sign In - Test with wrong password (should fail)
POST {{baseUrl}}/api/auth/signin
Content-Type: application/json

{
  "email": "testuser@company.com",
  "password": "WrongPassword"
}

###############################################
# 3. Verify User
###############################################

### Verify - Check if user is authenticated
GET {{baseUrl}}/api/auth/verify

###############################################
# 4. Reset Password
###############################################

### Reset Password - Send reset email
POST {{baseUrl}}/api/auth/reset-password
Content-Type: application/json

{
  "email": "testuser@company.com"
}

### Reset Password - Invalid email (should fail)
POST {{baseUrl}}/api/auth/reset-password
Content-Type: application/json

{
  "email": "invalid-email"
}

###############################################
# 5. Profile Management
###############################################

### Get Profile (requires authentication token)
GET {{baseUrl}}/api/auth/profile
Authorization: Bearer YOUR_FIREBASE_ID_TOKEN_HERE

### Update Profile (requires authentication token)
PUT {{baseUrl}}/api/auth/profile
Authorization: Bearer YOUR_FIREBASE_ID_TOKEN_HERE
Content-Type: application/json

{
  "displayName": "Updated Name",
  "phoneNumber": "+9876543210"
}

###############################################
# 6. Sign Out
###############################################

### Sign Out - Clear authentication
POST {{baseUrl}}/api/auth/signout

###############################################
# Test Different Roles
###############################################

### Create Admin User
POST {{baseUrl}}/api/auth/signup
Content-Type: application/json

{
  "email": "admin@company.com",
  "password": "AdminPass123",
  "displayName": "Admin User",
  "role": "admin",
  "companyId": "company_001"
}

### Create Driver User
POST {{baseUrl}}/api/auth/signup
Content-Type: application/json

{
  "email": "driver@company.com",
  "password": "DriverPass123",
  "displayName": "Driver User",
  "role": "driver",
  "companyId": "company_001"
}

### Create Customer User
POST {{baseUrl}}/api/auth/signup
Content-Type: application/json

{
  "email": "customer@company.com",
  "password": "CustomerPass123",
  "displayName": "Customer User",
  "role": "customer",
  "companyId": "company_001"
}

###############################################
# Error Cases
###############################################

### Sign Up - Missing required fields (should fail)
POST {{baseUrl}}/api/auth/signup
Content-Type: application/json

{
  "email": "test@test.com"
}

### Sign Up - Invalid email (should fail)
POST {{baseUrl}}/api/auth/signup
Content-Type: application/json

{
  "email": "invalid-email",
  "password": "Pass123",
  "displayName": "Test",
  "role": "manager",
  "companyId": "company_001"
}

### Sign Up - Weak password (should fail)
POST {{baseUrl}}/api/auth/signup
Content-Type: application/json

{
  "email": "test@test.com",
  "password": "123",
  "displayName": "Test",
  "role": "manager",
  "companyId": "company_001"
}

### Sign In - Non-existent user (should fail)
POST {{baseUrl}}/api/auth/signin
Content-Type: application/json

{
  "email": "nonexistent@company.com",
  "password": "Pass123"
}
